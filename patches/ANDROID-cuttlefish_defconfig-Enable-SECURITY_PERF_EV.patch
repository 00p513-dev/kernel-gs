From 08c5f74595a9ce0707b57e37a30d904bb47a5013 Mon Sep 17 00:00:00 2001
From: Alistair Strachan <astrachan@google.com>
Date: Fri, 26 Oct 2018 10:02:08 -0700
Subject: ANDROID: cuttlefish_defconfig: Enable
 SECURITY_PERF_EVENTS_RESTRICT

Bug: 118439987
Bug: 120439617
Change-Id: Ic7dd653292a565a2d4323d68692318e8d881aaeb
Signed-off-by: Alistair Strachan <astrachan@google.com>
---
 arch/arm64/configs/cuttlefish_defconfig      | 1 +
 arch/x86/configs/x86_64_cuttlefish_defconfig | 1 +
 2 files changed, 2 insertions(+)

diff --git a/arch/arm64/configs/cuttlefish_defconfig b/arch/arm64/configs/cuttlefish_defconfig
index 8897572788d26..2a6b0a950bc92 100644
--- a/arch/arm64/configs/cuttlefish_defconfig
+++ b/arch/arm64/configs/cuttlefish_defconfig
@@ -401,6 +401,7 @@ CONFIG_TMPFS_POSIX_ACL=y
 CONFIG_PSTORE=y
 CONFIG_PSTORE_CONSOLE=y
 CONFIG_PSTORE_RAM=y
+CONFIG_SECURITY_PERF_EVENTS_RESTRICT=y
 CONFIG_SECURITY=y
 CONFIG_SECURITY_NETWORK=y
 CONFIG_LSM_MMAP_MIN_ADDR=65536
diff --git a/arch/x86/configs/x86_64_cuttlefish_defconfig b/arch/x86/configs/x86_64_cuttlefish_defconfig
index 40026fb95672c..937f715f5fee4 100644
--- a/arch/x86/configs/x86_64_cuttlefish_defconfig
+++ b/arch/x86/configs/x86_64_cuttlefish_defconfig
@@ -418,6 +418,7 @@ CONFIG_NLS_CODEPAGE_437=y
 CONFIG_NLS_ASCII=y
 CONFIG_NLS_ISO8859_1=y
 CONFIG_NLS_UTF8=y
+CONFIG_SECURITY_PERF_EVENTS_RESTRICT=y
 CONFIG_SECURITY=y
 CONFIG_SECURITY_NETWORK=y
 CONFIG_SECURITY_PATH=y
-- 
2.23.0.444.g18eeb5a265-goog

